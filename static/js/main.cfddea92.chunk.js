(this.webpackJsonpfriday=this.webpackJsonpfriday||[]).push([[0],{13:function(e,t,a){e.exports={navLink:"NavBar_navLink__3jCbp",navBar:"NavBar_navBar__169o_",navBar__upperBlock:"NavBar_navBar__upperBlock__qc2oW",link:"NavBar_link__3U1xr",navBarExtension:"NavBar_navBarExtension__YcT2y",navBarExtensionHide:"NavBar_navBarExtensionHide__2vlmv",navBarExtension__upperBlock:"NavBar_navBarExtension__upperBlock__3s2dJ"}},18:function(e,t,a){e.exports={wrapper:"Forgot_wrapper__p4CpK",singIn:"Forgot_singIn__2QqXC",input:"Forgot_input__1kc8l",message:"Forgot_message__SKEZ1",loader:"Forgot_loader__2eWnp"}},20:function(e,t,a){e.exports={button:"Button_button__aD3e1",red:"Button_red__23PuC",blue:"Button_blue__26HuO",disabled:"Button_disabled__31_Cw"}},23:function(e,t,a){e.exports=a.p+"static/media/preloader.d01db4ec.gif"},24:function(e,t,a){e.exports={wrapper:"Login_wrapper__2teXa",loader:"Login_loader__Gy6hG",message:"Login_message___QPJw"}},25:function(e,t,a){e.exports={wrapper:"Registration_wrapper__FBY9v",message:"Registration_message__2t-4U",loader:"Registration_loader__224UO"}},30:function(e,t,a){e.exports={wrapper:"Profile_wrapper__34_Q4",introduction:"Profile_introduction__3znfv"}},43:function(e,t,a){e.exports={App:"App_App__16cJx"}},45:function(e,t,a){e.exports={input:"Input_input__2FfA1"}},49:function(e,t,a){e.exports=a(78)},54:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(54),a(41)),s=a(42),l=a(48),u=a(47),m=a(43),p=a.n(m),d=a(13),g=a.n(d),b=a(7);var f=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:g.a.navBar},r.a.createElement("div",{className:g.a.navBar__upperBlock},r.a.createElement("i",{className:"material-icons",onClick:function(){e.menuClickHandle()}},e.showNavBar?"keyboard_arrow_right":"keyboard_arrow_left"),r.a.createElement(b.b,{to:"/",className:g.a.link},"P"),r.a.createElement(b.b,{to:"/login",className:g.a.link},"L"),r.a.createElement(b.b,{to:"/registration",className:g.a.link},"R"),r.a.createElement(b.b,{to:"/forgot",className:g.a.link},"F"))),r.a.createElement("div",{className:"".concat(g.a.navBarExtension," ").concat(e.showNavBar&&g.a.navBarExtensionHide)},r.a.createElement("div",{className:g.a.navBarExtension__upperBlock},r.a.createElement("div",null,"Menu"),r.a.createElement("div",null,"Profile"),r.a.createElement("div",null,"Login"),r.a.createElement("div",null,"Registration"),r.a.createElement("div",null,"Forgot password"))))},v=a(3),E=a(11),_=a(4),h=a(10),O=a.n(h),k=a(14),j=a(2),w=a(15),N=a.n(w),S=N.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),x=function(e,t,a){return S.post("auth/login",{email:e,password:t,rememberMe:a})},C=function(){return N.a.post("https://cards-nya-back.herokuapp.com/1.0/auth/me",{token:document.cookie})},y={success:!1,error:"",isThereToken:!1,isLoading:!1,showError:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{success:t.success,error:"",isLoading:!1});case"SET_ERROR":return Object(j.a)(Object(j.a)({},e),{},{success:!1,error:t.error});case"SET_TOKEN":return Object(j.a)(Object(j.a)({},e),{},{isThereToken:t.isThereToken});case"LOADING_LOGIN":return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.isLoading});case"SHOW_ERROR":return Object(j.a)(Object(j.a)({},e),{},{showError:t.showError});default:return e}},T=function(e){return{type:"SET_SUCCESS",success:e}},L=function(e){return{type:"SET_TOKEN",isThereToken:e}},R=function(e){return{type:"LOADING_LOGIN",isLoading:e}},I=function(e){return{type:"SHOW_ERROR",showError:e}},A=function(){return function(){var e=Object(k.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C();case 3:a=e.sent,t(L(!0)),document.cookie="".concat(a.data.token,"; max-age=3600"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(L(!1));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},G=a(24),M=a.n(G),F=a(45),P=a.n(F);var H=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:e.type?e.type:"text",placeholder:e.placeholder,className:P.a.input,onClick:e.onClick,onChange:e.onChange,value:e.value}))},U=a(20),D=a.n(U);var W=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"".concat(D.a.button,"\n                ").concat("red"===e.color?D.a.red:D.a.blue,"\n                ").concat(e.disabled&&D.a.disabled),onClick:e.onClick,onChange:e.onChange,value:e.value,disabled:e.disabled},e.description))},J=a(23),K=a.n(J),q=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(E.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(!1),m=Object(E.a)(u,2),p=m[0],d=m[1],g=Object(_.c)((function(e){return e.login})).isLoading,b=Object(_.c)((function(e){return e.login})).showError,f=Object(n.useCallback)((function(e){return c(e.target.value)}),[c]),h=Object(n.useCallback)((function(e){return l(e.target.value)}),[l]),O=Object(n.useCallback)((function(){return d(!0)}),[d]),k=Object(_.b)(),j=Object(n.useCallback)((function(){k(function(e,t,a){return function(n){n(R(!0)),x(e,t,a).then((function(e){document.cookie="".concat(e.data.token,"; max-age=3600"),n(T(!0)),n(R(!1))})).catch((function(e){var t=e.response.data.error;n({type:"SET_ERROR",error:t}),n(R(!1)),n(I(!0)),setTimeout((function(){n(I(!1))}),3e3)}))}}(a,s,p))}),[a,s,p,k]),w=Object(_.c)((function(e){return e.login})),N=w.success,S=w.error,C=w.isThereToken;return Object(n.useEffect)((function(){!C&&document.cookie&&k(A())}),[k,C]),N&&""===S||C&&document.cookie?r.a.createElement(v.a,{to:"/"}):r.a.createElement("div",{className:M.a.wrapper},r.a.createElement(H,{placeholder:"Email",value:a,onChange:f,type:"email"}),r.a.createElement(H,{placeholder:"password",type:"password",value:s,onChange:h}),r.a.createElement(H,{type:"checkbox",onChange:O}),r.a.createElement(W,{description:"Login",onClick:j,disabled:g}),g&&r.a.createElement("div",null,r.a.createElement("img",{src:K.a,className:M.a.loader,alt:"loading"})),b&&r.a.createElement("div",{className:M.a.message},S))},Q=a(25),Y=a.n(Q),z=function(e,t){return N.a.post("https://cards-nya-back.herokuapp.com/1.0/auth/register",{email:e,password:t})},X={loading:!1,success:!1,error:""},$="SET_SUCCESS",Z="SET_ERROR",V="SET_LOADING",ee=function(e){return{type:Z,error:e}};var te=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(E.a)(o,2),s=i[0],l=i[1],u=Object(n.useState)(""),m=Object(E.a)(u,2),p=m[0],d=m[1],g=Object(n.useState)(!1),b=Object(E.a)(g,1)[0],f=Object(n.useCallback)((function(e){return c(e.target.value)}),[c]),h=Object(n.useCallback)((function(e){return l(e.target.value)}),[l]),j=Object(n.useCallback)((function(e){return d(e.target.value)}),[d]),w=Object(_.b)(),N=Object(n.useCallback)((function(){w(function(e,t,a){return function(){var n=Object(k.a)(O.a.mark((function n(r){var c;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:V,loading:!0}),t===a){n.next=5;break}r(ee("Password is not match")),n.next=28;break;case 5:if(""!==e&&""!==t&&""!==a){n.next=9;break}r(ee("All field is required!")),n.next=28;break;case 9:if(!(t.length<=7||a.length<=7)){n.next=13;break}r(ee("password must be more than 7 char!")),n.next=28;break;case 13:if(e.match(/^[\w][\w-.]*@[\w-]+\.[a-z]{2,7}$/i)){n.next=17;break}r(ee("Email is not valid!")),n.next=28;break;case 17:return n.prev=17,n.next=20,z(e,t);case 20:r({type:$,success:!0}),n.next=28;break;case 23:n.prev=23,n.t0=n.catch(17),c=n.t0.response.data.error,r(ee(c));case 28:case"end":return n.stop()}}),n,null,[[17,23]])})));return function(e){return n.apply(this,arguments)}}()}(a,s,p))}),[a,s,p,"",w]),S=Object(_.c)((function(e){return e.register})),x=S.success,C=S.error,y=S.loading;return x&&""===C?r.a.createElement(v.a,{to:"/login"}):r.a.createElement("div",{className:Y.a.wrapper},r.a.createElement(H,{type:"email",placeholder:"Email",value:a,onChange:f}),r.a.createElement(H,{type:"password",placeholder:"password",value:s,onChange:h}),r.a.createElement(H,{type:"password",placeholder:"confirm password",value:p,onChange:j}),r.a.createElement(W,{description:"Register",onClick:N}),b&&r.a.createElement("div",{className:Y.a.message},""),C&&r.a.createElement("div",{className:Y.a.message},C),y&&r.a.createElement("div",null,"Loading"))},ae=a(18),ne=a.n(ae),re=N.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),ce=function(e){return re.post("auth/forgot",{email:e})},oe={email:"",emailSent:null,isLoading:!1,showMessage:!1,message:""},ie=function(e,t){return{type:"TOGGLE_MESSAGE",toggle:e,message:t}},se=function(e){return{type:"LOADING_IN_PROCESS",loadingToggle:e}},le=function(e){return function(){var t=Object(k.a)(O.a.mark((function t(a){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(se(!0)),t.prev=1,t.next=4,ce(e);case 4:t.sent,a({type:"EMAIL_SENT",emailSent:!0}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a((console.log("\u0432\u0441\u0435 \u043f\u043b\u043e\u0445\u043e"),{type:"EMAIL_SENT",emailSent:!1}));case 11:return t.prev=11,a(se(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()};var ue=function(){var e=Object(_.b)(),t=Object(n.useState)(""),a=Object(E.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(E.a)(i,2),l=s[0],u=s[1],m=Object(_.c)((function(e){return e.forgot})).emailSent,p=Object(_.c)((function(e){return e.forgot})).isLoading,d=Object(_.c)((function(e){return e.forgot})).showMessage,g=Object(_.c)((function(e){return e.forgot})).message,f=function(){var t=Object(k.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.next=3,e(le(c));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){!0===m?(u(!1),e(ie(!0,"Password recovery link sent to email")),setTimeout((function(){e(ie(!1,""))}),3e3),v.a):!1===m&&(u(!1),e(ie(!0,"Error")),setTimeout((function(){e(ie(!1,""))}),3e3),console.log("\u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u043e"))}),[m,e]),r.a.createElement("div",{className:ne.a.wrapper},r.a.createElement("div",{className:ne.a.input},r.a.createElement(H,{placeholder:"Your email",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement(W,{description:"Send",onClick:f,disabled:l})),r.a.createElement("div",null,r.a.createElement(b.b,{to:"/login",className:ne.a.singIn},"Sing In")),d&&r.a.createElement("div",{className:ne.a.message},g),p&&r.a.createElement("div",null,r.a.createElement("img",{src:K.a,className:ne.a.loader,alt:"loading"})))},me=a(30),pe=a.n(me);var de=function(){var e=Object(_.c)((function(e){return e.login})),t=e.isThereToken,a=e.success,c=Object(_.b)();return Object(n.useEffect)((function(){document.cookie&&!t&&c(A())}),[c,t]),t||document.cookie||a?r.a.createElement("div",{className:pe.a.wrapper},"Profile",r.a.createElement("div",{className:pe.a.introduction},r.a.createElement(H,null),r.a.createElement("div",null,r.a.createElement(W,{description:"Blue",color:"blue"}),r.a.createElement(W,{description:"Log Out",color:"red",onClick:function(){document.cookie="".concat(document.cookie,"; max-age=-1"),c(L(!1)),c(T(!1))}})))):r.a.createElement(v.a,{to:"/login"})},ge=[{id:0,title:"login",path:"/login",component:function(){return r.a.createElement(q,null)}},{id:1,title:"register",path:"/registration",component:function(){return r.a.createElement(te,null)}},{id:2,title:"forgot",path:"/forgot",component:function(){return r.a.createElement(ue,null)}},{id:3,title:"profile",path:"/",exact:!0,component:function(){return r.a.createElement(de,null)}}],be=function(){return r.a.createElement(v.d,null,ge.map((function(e){return r.a.createElement(v.b,{key:e.id,path:e.path,exact:e.exact,render:e.component})})))},fe=a(17),ve=a(46),Ee=Object(fe.c)({login:B,register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(j.a)(Object(j.a)({},e),{},{loading:t.loading});case $:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,success:t.success,error:""});case Z:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,success:!1,error:t.error});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMAIL":return Object(j.a)(Object(j.a)({},e),{},{email:t.email});case"EMAIL_SENT":return Object(j.a)(Object(j.a)({},e),{},{emailSent:t.emailSent,showMessage:!0});case"TOGGLE_MESSAGE":return Object(j.a)(Object(j.a)({},e),{},{showMessage:t.toggle,message:t.message});case"LOADING_IN_PROCESS":return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.loadingToggle});default:return e}}}),_e=Object(fe.d)(Ee,Object(fe.a)(ve.a)),he=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showNavBar:!0},e.menuClickHandle=function(){e.setState({showNavBar:!e.state.showNavBar})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(_.a,{store:_e},r.a.createElement("div",{className:p.a.App},r.a.createElement(f,{menuClickHandle:this.menuClickHandle,showNavBar:this.state.showNavBar}),r.a.createElement(be,null))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.cfddea92.chunk.js.map